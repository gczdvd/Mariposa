<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href='https://fonts.googleapis.com/css?family=Work Sans' rel='stylesheet'>
    <style>
        body{
            font-family: Work Sans;
            margin: 0;
            overflow: hidden;
            background-color: gray;
        }
        h1{
            text-align: center;
        }
        button{
            margin-top: 1vh;
            margin-left: 40vw;
            width: 20vw;
            height: 5vw;
            border-radius: 10px;
        }
        #rgb{
            visibility: hidden;
        }
        input[type="text"]{
            width: 50vw;
            margin-left: 25vw;
            margin-top: 5vh;
            -webkit-appearance: none;
            height: 3vw;
            border-radius: 1.5vw;
            background: rgb(192, 192, 192);
        }
        input[type="range"]{
            width: 90vw;
            margin-left: 5vw;
            margin-top: 5vh;
            -webkit-appearance: none;
            height: 3vw;
            border-radius: 1.5vw;
            background: rgb(192, 192, 192);
        }
        input::-webkit-slider-thumb{
            -webkit-appearance: none;
            width: 5vw;
            height: 5vw;
            border-radius: 50%;
            cursor: pointer;
        }
        #r::-webkit-slider-thumb{
            background: red;
        }
        #g::-webkit-slider-thumb{
            background: green;
        }
        #b::-webkit-slider-thumb{
            background: blue;
        }
    </style>
    <script>
        window.addEventListener("keydown", enter);
        function enter(bill){
            if(bill.keyCode == 13){
                setIP();
            }
        }
        var ip;
        function setIP(){
            ip = document.getElementById('ip').value;
            document.getElementById('set').style.visibility = "hidden";
            document.getElementById('rgb').style.visibility = "visible";
        }
        function send(){
            delay = 50;

            var r = document.getElementById('r').value;
            var g = document.getElementById('g').value;
            var b = document.getElementById('b').value;

            setTimeout(() => {
                httpSend(ip, "r", r);
            }, delay);

            setTimeout(() => {
                httpSend(ip, "g", g);
            }, delay);

            setTimeout(() => {
                httpSend(ip, "b", b);
            }, delay);
        }

        function httpSend(theUrl, color, data){
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open( "GET", "http://" + theUrl + "/" + color + "?value=" + data, false ); // false for synchronous request
            xmlHttp.send( null );
            return xmlHttp.responseText;
        }
    </script>
</head>
<body>
    <div id="set">
        <input type="text" id="ip" autocomplete="off" placeholder="LED szalag vezérlő IP címe/URL-je.">
        <br>
        <button onclick="setIP()">Beállít</button>
    </div>
    <div id="rgb">
        <input type="range" min="0" max="255" id="r" onchange="send()" value="0">
        <br>
        <input type="range" min="0" max="255" id="g" onchange="send()" value="0">
        <br>
        <input type="range" min="0" max="255" id="b" onchange="send()" value="0">
    </div>
</body>
</html>
